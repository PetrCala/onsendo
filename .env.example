# Onsendo Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# Google Drive Backup Configuration
# ============================================================================

# Path to Google OAuth2 credentials JSON file
# Get this from: https://console.cloud.google.com/apis/credentials
# 1. Create a new OAuth 2.0 Client ID (Desktop app)
# 2. Download the credentials JSON file
# 3. Place it at: local/gdrive/credentials.json
GDRIVE_CREDENTIALS=local/gdrive/credentials.json

# Path where access token will be stored (auto-generated after first auth)
GDRIVE_TOKEN=local/gdrive/token.json

# Name of the backup folder in Google Drive
GDRIVE_BACKUP_FOLDER=onsendo_backups

# ============================================================================
# Backup Settings
# ============================================================================

# Number of local backups to keep (older backups are deleted)
KEEP_BACKUPS=10

# Backup directory path (relative to project root)
BACKUP_DIR=artifacts/db/backups

# ============================================================================
# Notes
# ============================================================================

# To set up Google Drive backups:
#
# 1. Enable Google Drive API:
#    - Go to https://console.cloud.google.com/
#    - Create a new project or select existing
#    - Enable "Google Drive API"
#
# 2. Create OAuth 2.0 Credentials:
#    - Go to APIs & Services > Credentials
#    - Click "Create Credentials" > "OAuth client ID"
#    - Choose "Desktop app" as application type
#    - Download the credentials JSON
#
# 3. Save credentials:
#    mkdir -p local/gdrive
#    cp ~/Downloads/client_secret_*.json local/gdrive/credentials.json
#
# 4. First authentication:
#    make backup-cloud
#    # A browser window will open for authorization
#    # After authorization, token will be saved to local/gdrive/token.json
#
# 5. Subsequent backups:
#    make backup-full    # Local + cloud backup
#    make backup-cloud   # Cloud sync only
#
# Security Notes:
# - Never commit credentials.json or token.json to git
# - Keep GDRIVE_CREDENTIALS and GDRIVE_TOKEN in local/ directory (gitignored)
# - Tokens expire after 7 days of inactivity and will auto-refresh

# ============================================================================
# Strava API Configuration
# ============================================================================

# Strava OAuth2 Credentials
# Get these from: https://www.strava.com/settings/api
STRAVA_CLIENT_ID=your_client_id_here
STRAVA_CLIENT_SECRET=your_client_secret_here

# OAuth2 Redirect URI (for local development)
# This must match the "Authorization Callback Domain" in your Strava app settings
STRAVA_REDIRECT_URI=http://127.0.0.1:8080/strava/callback

# Token Storage Path (where access/refresh tokens will be stored)
STRAVA_TOKEN_PATH=local/strava/token.json

# Default Sync Settings
STRAVA_DEFAULT_SYNC_DAYS=7
STRAVA_DEFAULT_DOWNLOAD_FORMAT=all

# Activity Storage Directory
STRAVA_ACTIVITY_DIR=data/strava/activities

# ============================================================================
# Strava Setup Instructions
# ============================================================================
#
# 1. Create Strava API Application:
#    - Go to https://www.strava.com/settings/api
#    - Click "Create an App" (if you don't have one)
#    - Fill in details:
#      * Application Name: "Onsendo Personal"
#      * Category: "Other"
#      * Club: Leave blank
#      * Website: http://localhost (for personal use)
#      * Authorization Callback Domain: localhost
#
# 2. Copy credentials to .env:
#    - Copy this file to .env
#    - Replace your_client_id_here with your Client ID
#    - Replace your_client_secret_here with your Client Secret
#
# 3. Authenticate:
#    poetry run onsendo strava auth
#    # Browser will open for authorization
#    # After approval, token saved to local/strava/token.json
#
# 4. Test connection:
#    poetry run onsendo strava status
#
# 5. Start using:
#    poetry run onsendo strava browse
#    poetry run onsendo strava sync --days 7
#
# Security Notes:
# - Never commit .env to git (already in .gitignore)
# - Keep your Client Secret private
# - Token expires after 6 hours but auto-refreshes
# - Refresh token is long-lived (use carefully)

# ============================================================================
# WeatherAPI.com Configuration (Optional)
# ============================================================================

# API key for automatic temperature fetching during visit recording
# Get your free API key at: https://www.weatherapi.com/signup.aspx
# Free tier: 1,000,000 calls/month (more than enough for personal use)
WEATHERAPI_API_KEY=your_api_key_here

# ============================================================================
# WeatherAPI Setup Instructions
# ============================================================================
#
# 1. Sign up for free API key:
#    - Go to https://www.weatherapi.com/signup.aspx
#    - Create a free account
#    - Copy your API key from the dashboard
#
# 2. Add API key to .env:
#    - Copy this file to .env (if you haven't already)
#    - Replace your_api_key_here with your actual API key
#
# 3. Usage:
#    - When recording an onsen visit, you'll be prompted for temperature
#    - Type 'fetch' to automatically retrieve historical weather data
#    - The system uses the onsen's coordinates and your visit time
#    - You'll be prompted to confirm or override the fetched temperature
#
# 4. Features:
#    - Automatic retry on network failures
#    - Graceful fallback to manual entry if API unavailable
#    - Uses Japan Standard Time (JST/UTC+9) for all queries
#    - Fetches temperature based on onsen location and visit timestamp
#
# Notes:
# - This feature is completely optional
# - If not configured, you can still enter temperature manually
# - Free tier limits: 1M calls/month (very generous for personal use)
# - Historical data available for past dates
